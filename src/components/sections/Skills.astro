---
import Section from "../Section.astro";
import cv from "@cv";

interface Tech {
  name: string;
  level?: string;
  category?: string;
}

const stack = ((cv as any).techStack || []) as Tech[];

const ICONS = {
  React: "/iconos/REACT.webp",
  HTML5: "/iconos/HTML.webp",
  CSS3: "/iconos/CSS.webp",
  JavaScript: "/iconos/JS.webp",
  jQuery: "/iconos/JQUERY.webp",
  Bootstrap: "/iconos/Bootstrap.webp",
  Astro: "/iconos/ASTRO.webp",
  Python: "/iconos/PYTHON.webp",
  MySQL: "/iconos/MYSQL.webp",
  "SQL Server": "/iconos/SQLSERVER.webp",
  "Arc XP": "/iconos/ARCXP.webp",
  Strapi: "/iconos/STRAPI.webp",
  Git: "/iconos/GIT.webp",
  GitHub: "/iconos/GITHUB.webp",
  Docker: "/iconos/DOCKER.webp",
  AWS: "/iconos/AWS.webp",
  Linux: "/iconos/UBUNTU-LINUX.webp",
  FastAPI: "/iconos/Fatapi.webp",
  PostgreSQL: "/iconos/Postgresql.webp",
  SQLite: "/iconos/Sqlite.webp",
  "Tailwind CSS": "/iconos/Tailwind.webp",
} as const;
---

<Section title="Habilidades">
  <ul class="grid">
    {
      stack.map((s) => {
        const iconName = s.name === "Next.js" ? "Next" : s.name;
        const iconData = ICONS[s.name as keyof typeof ICONS];
        const isSvg = iconData?.startsWith("<svg");

        return (
          <li class="item">
            {isSvg ? (
              <span class="icon" set:html={iconData} />
            ) : (
              <img
                class="icon-img"
                src={iconData}
                alt={s.name}
                width="28"
                height="28"
              />
            )}
            <div class="meta">
              <strong>{s.name}</strong>
              <small>
                {s.category} â€¢ {s.level}
              </small>
            </div>
          </li>
        );
      })
    }
  </ul>
</Section>

<style>
  .grid {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 0.9rem;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }
  .item {
    display: flex;
    gap: 0.6rem;
    align-items: center;
    padding: 0.55rem 0.7rem;
    border: 1px solid #e5e5e5;
    border-radius: 10px;
    background: #fff;
  }
  .icon {
    display: inline-flex;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: #f4f6f8;
    align-items: center;
    justify-content: center;
  }
  .meta strong {
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 0.02em;
  }
  .meta small {
    display: block;
    font-size: 0.6rem;
    color: #666;
    letter-spacing: 0.05em;
    margin-top: 2px;
    text-transform: uppercase;
  }
  @media (width <= 600px) {
    .grid {
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
  }
</style>
